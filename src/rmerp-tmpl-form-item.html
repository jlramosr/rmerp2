<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="rmerp-styles.html">

<dom-module id="rmerp-tmpl-form-item">
  <template>

    <style include="template-layout-styles show-styles">
      /*
        https://css-tricks.com/snippets/css/complete-guide-grid/
        grid-column: span 3         fills next 3 free squares.
        grid-column: 1 / 3          fills from square number 1 to square number 3.
        grid-column: span 1 / 3     fills 1 square from square number 3 from right to left.
        grid-column: 1 / span 3     fills 3 squares from square number 1 from left to right.
      */

      :host {
        background: transparent;
        padding: 0 5px;
        grid-column: span var(--cols);
      }

      :host([col-start]:not([col-end])) {
        grid-column: var(--col-start) / span var(--cols);
      }

      :host(:not([col-start])[col-end]) {
        grid-column: span var(--cols) / var(--col-end);
      }

      :host([col-start][col-end]) {
        grid-column: var(--col-start) / var(--col-end);
      }

      @media (max-width: 720px) { 
        :host(:not([small-col-start]):not([small-col-end])) {
          grid-column: span var(--small-cols);
        }

        :host([small-col-start]:not([small-col-end])) {
          grid-column: var(--small-col-start) / span var(--small-cols);
        }

        :host(:not([small-col-start])[small-col-end]) {
          grid-column: span var(--small-cols) / var(--small-col-end);
        }

        :host([small-col-start][small-col-end]) {
          grid-column: var(--small-col-start) / var(--small-col-end);
        }

      }

    </style>

    <slot></slot>

  </template>

  <script>

    class RMERPTmplFormItem extends Polymer.Element {

      static get is() { return 'rmerp-tmpl-form-item'; }

      static get properties() {
        return {

          cols: {
            type: Number,
            reflectToAttribute: true
          },

          colStart: {
            type: Number,
            reflectToAttribute: true
          },

          colEnd: {
            type: Number,
            reflectToAttribute: true
          },

          smallCols: {
            type: Number,
            reflectToAttribute: true
          },

          smallColStart: {
            type: Number,
            reflectToAttribute: true
          },

          smallColEnd: {
            type: Number,
            reflectToAttribute: true
          },

          formCols: Number,

          smallScreen: {
            type: Boolean,
            reflectToAttribute: true
          }
        
        }

      }

      connectedCallback() {
        super.connectedCallback();

        if (!this.smallCols || this.smallCols < 1 || this.smallCols > this.formCols) {
          this.smallCols = this.formCols; //default smallCols value
        }

        if (!this.cols || this.cols < 1 || this.cols > this.formCols) {
          this.cols = this.formCols / 2; //default cols value
        }

        if (this.colStart < 1 || this.colStart > this.formCols) {
          this.colStart = undefined;
        }

        if (this.colEnd < 1 || this.colEnd > this.formCols) {
          this.colEnd = undefined;
        }

        this.updateStyles({
          '--cols': this.cols,
          '--col-start': this.colStart,
          //grid-column: 4 / 5 only fills square number 4
          //grid-column: 4 / 5+1 fills number 4 and 5
          '--col-end': this.colEnd + 1,
          '--small-cols': this.smallCols,
          '--small-col-start': this.smallColStart,
          '--small-col-end': this.smallColEnd + 1,
          '--form-cols': this.formCols
        });
      }

    }

    window.customElements.define(RMERPTmplFormItem.is, RMERPTmplFormItem);

  </script>
</dom-module>
