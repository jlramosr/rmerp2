<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="rmerp-tmpl-category-route.html">

<!-- it loads default view eagerly -->
<link rel="import" href="rmerp-clients-list.html">
<!--<link rel="import" href="rmerp-clients-overview.html">-->

<dom-module id="rmerp-clients">
  <template>

    <rmerp-tmpl-category-route
      id="categoryTemplate"
      route="[[route]]"
      collection="clients" 
      items={{items}} 
      item={{item}}>

      <rmerp-clients-list name="list" data="{{items}}" small-screen="[[smallScreen]]" load-complete="[[loadComplete]]"></rmerp-clients-list>
      <rmerp-clients-overview name="overview" data="{{item}}" small-screen="[[smallScreen]]"></rmerp-clients-overview>
      <rmerp-clients-settings name="settings" data="{{item}}" small-screen="[[smallScreen]]"></rmerp-clients-settings>

    </rmerp-tmpl-category-route>

  </template>

  <script>

    class RMERPClients extends Polymer.Element {

      static get is() { return 'rmerp-clients'; }

      static get properties() {
        return {

          route: Object,

          collection: String,

          items: Array,

          item: Object,

          itemId: String,

          smallScreen: Boolean

        };
      }

      ready() {
        super.ready();

        const href = this.resolveUrl('rmerp-clients-overview.html');
        Polymer.importHref(href, this._pageLoaded(), null, false);
      }

      _pageLoaded() {
        console.log("HOLA");
        Polymer.RenderStatus.afterNextRender(this, _ => {

          console.log("After Next Render Clients");
          /*Polymer.importHref(this.resolveUrl('lazy-resources.html'), _ => {
            console.log("POR AQUIIIII");
            this.loadComplete = true;
            // Load pre-caching Service Worker
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.register('/service-worker.js');
            }
          });*/

        });
      }

    }

    window.customElements.define(RMERPClients.is, RMERPClients);

  </script>
</dom-module>
